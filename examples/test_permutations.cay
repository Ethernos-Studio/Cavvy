// 大型测试：排列生成
public class TestPermutations {
    
    static int count = 0;
    
    public static void swap(int[] arr, int i, int j) {
        int temp = arr[i];
        arr[i] = arr[j];
        arr[j] = temp;
    }
    
    // 生成全排列
    public static void permute(int[] arr, int start, int n) {
        if (start == n - 1) {
            count = count + 1;
            if (count <= 10) {
                printPermutation(arr, n);
            }
            return;
        }
        
        for (int i = start; i < n; i++) {
            swap(arr, start, i);
            permute(arr, start + 1, n);
            swap(arr, start, i);
        }
    }
    
    public static void printPermutation(int[] arr, int n) {
        print(count);
        print(": ");
        for (int i = 0; i < n; i++) {
            print(arr[i]);
            print(" ");
        }
        println("");
    }
    
    // 下一个排列
    public static boolean nextPermutation(int[] arr, int n) {
        int i = n - 2;
        while (i >= 0 && arr[i] >= arr[i + 1]) {
            i = i - 1;
        }
        
        if (i < 0) {
            return false;
        }
        
        int j = n - 1;
        while (arr[j] <= arr[i]) {
            j = j - 1;
        }
        
        swap(arr, i, j);
        
        // 反转i+1到末尾
        int left = i + 1;
        int right = n - 1;
        while (left < right) {
            swap(arr, left, right);
            left = left + 1;
            right = right - 1;
        }
        
        return true;
    }
    
    // 计算阶乘
    public static int factorial(int n) {
        if (n <= 1) return 1;
        int result = 1;
        for (int i = 2; i <= n; i++) {
            result = result * i;
        }
        return result;
    }
    
    public static void main() {
        println("=== Permutation Tests ===");
        
        // 测试1：递归生成
        println("\n1. Recursive permutation generation (first 10 of 4! = 24):");
        int[] arr = {1, 2, 3, 4};
        count = 0;
        permute(arr, 0, 4);
        print("Total permutations: ");
        println(count);
        
        if (count == 24) {
            println("Permutation count test PASSED!");
        } else {
            println("Permutation count test FAILED!");
        }
        
        // 测试2：下一个排列
        println("\n2. Next permutation test:");
        int[] arr2 = {1, 2, 3};
        count = 0;
        do {
            count = count + 1;
            printPermutation(arr2, 3);
        } while (nextPermutation(arr2, 3));
        
        print("Total: ");
        println(count);
        
        if (count == 6) {
            println("Next permutation test PASSED!");
        } else {
            println("Next permutation test FAILED!");
        }
        
        println("\nAll permutation tests completed!");
    }
}
